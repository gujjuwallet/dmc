import{r as n,j as e,C as o,L as x,B as i,Q as f,n as r}from"./index-DeE3vtCn.js";import{c as m,e as y}from"./api-BHjxf7no.js";import{T}from"./Table-DF0PIz40.js";const L=()=>{const[a,l]=n.useState([]),[j,d]=n.useState(!0),[c,h]=n.useState(null);n.useEffect(()=>{(async()=>{try{const t=await m();l(t),console.log(t),d(!1)}catch{h("Failed to fetch transports"),d(!1)}})()},[]);const p=s=>{r.info(e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"Are you sure you want to delete this transport option?"}),e.jsxs("div",{children:[e.jsx(i,{variant:"danger",size:"sm",onClick:()=>u(s),children:"Yes"}),e.jsx(i,{variant:"secondary",size:"sm",style:{marginLeft:"10px"},onClick:()=>r.dismiss(),children:"No"})]})]}),{position:"top-center",autoClose:!1,closeOnClick:!1,hideProgressBar:!0})},u=async s=>{try{await y(s),l(a.filter(t=>t._id!==s)),r.success("Transport option deleted successfully!",{position:"top-right",autoClose:2e3}),r.dismiss()}catch{h("Failed to delete transport option"),r.error("Failed to delete transport option. Please try again.",{position:"top-right",autoClose:3e3}),r.dismiss()}};return j?e.jsx("p",{children:"Loading transports..."}):c?e.jsx("p",{children:c}):e.jsxs(o,{children:[e.jsxs(o.Header,{children:[e.jsx(o.Title,{as:"h5",children:"Transport List"}),e.jsx(x,{to:"/transport/add",children:e.jsx(i,{variant:"primary",children:"Add Transport"})})]}),e.jsx(o.Body,{children:e.jsxs(T,{responsive:!0,hover:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Vehicle Type"}),e.jsx("th",{children:"Pickup Location"}),e.jsx("th",{children:"Dropoff Location"}),e.jsx("th",{children:"Rate"}),e.jsx("th",{children:"Availability"}),e.jsx("th",{children:"Time of Day"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:a.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.vehicleType}),e.jsx("td",{children:s.route.pickup}),e.jsx("td",{children:s.route.dropoff}),e.jsx("td",{children:s.rate}),e.jsx("td",{children:e.jsx("h6",{children:s.availability?"Available":"Not Available"})}),e.jsx("td",{children:s.timeOfDay}),e.jsxs("td",{children:[e.jsx(x,{to:`/transport/edit/${s._id}`,children:e.jsx(i,{variant:"warning",children:"Edit"})})," ",e.jsx(i,{variant:"danger",onClick:()=>p(s._id),children:"Delete"})]})]},s._id))})]})}),e.jsx(f,{})]})};export{L as default};
