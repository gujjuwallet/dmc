import{o as b,e as I,r as o,j as e,C as c,B as C,Q as k,n as d}from"./index-DeE3vtCn.js";import{j as f,g as T,c as _,q as G,r as q}from"./api-BHjxf7no.js";import{F as a}from"./Form-BuK-_8iF.js";import"./ElementChildren-DI3yop4o.js";import"./Col-BDLpqSzm.js";const F=()=>{const{id:l}=b(),x=I(),[i,p]=o.useState({package:"",hotel:"",transport:"",additionalServices:"",startDate:"",endDate:"",price:"",availability:!0}),[j,m]=o.useState([]),[y,v]=o.useState([]),[g,D]=o.useState([]);o.useEffect(()=>{const r=async()=>{try{const t=await f(),h=await T(),u=await _();m(t),v(h),D(u)}catch{d.error("Failed to load dropdown data.")}},n=async()=>{if(l)try{const t=await G(l);p({package:t.package._id||"",hotel:t.hotel._id||"",transport:t.transport._id||"",additionalServices:t.additionalServices.join(", "),startDate:t.startDate.split("T")[0],endDate:t.endDate.split("T")[0],price:t.price,availability:t.availability}),console.log(t)}catch{d.error("Failed to load itinerary.")}};r(),n()},[l]);const s=r=>{const{name:n,value:t,type:h,checked:u}=r.target;p(h==="checkbox"?{...i,[n]:u}:{...i,[n]:t})},S=async r=>{r.preventDefault();const n={...i,additionalServices:i.additionalServices.split(",").map(t=>t.trim())};try{await q(l,n),d.success("Itinerary updated successfully!"),setTimeout(()=>x("/itineraries"),2e3)}catch{d.error("Failed to update itinerary.")}};return e.jsxs(c,{children:[e.jsx(c.Header,{children:e.jsx(c.Title,{as:"h5",children:"Edit Itinerary"})}),e.jsx(c.Body,{children:e.jsxs(a,{onSubmit:S,children:[e.jsxs(a.Group,{controlId:"package",children:[e.jsx(a.Label,{children:"Package"}),e.jsxs(a.Select,{name:"package",value:i.package,onChange:s,required:!0,children:[e.jsx("option",{value:"",children:"Select Package"}),j.map(r=>e.jsx("option",{value:r._id,children:r.name},r._id))]})]}),e.jsxs(a.Group,{controlId:"hotel",children:[e.jsx(a.Label,{children:"Hotel"}),e.jsxs(a.Select,{name:"hotel",value:i.hotel,onChange:s,required:!0,children:[e.jsx("option",{value:"",children:"Select Hotel"}),y.map(r=>e.jsx("option",{value:r._id,children:r.name},r._id))]})]}),e.jsxs(a.Group,{controlId:"transport",children:[e.jsx(a.Label,{children:"Transport"}),e.jsxs(a.Select,{name:"transport",value:i.transport,onChange:s,required:!0,children:[e.jsx("option",{value:"",children:"Select Transport"}),g.map(r=>e.jsx("option",{value:r._id,children:r.vehicleType},r._id))]})]}),e.jsxs(a.Group,{controlId:"additionalServices",children:[e.jsx(a.Label,{children:"Additional Services (comma separated)"}),e.jsx(a.Control,{type:"text",name:"additionalServices",value:i.additionalServices,onChange:s})]}),e.jsxs(a.Group,{controlId:"startDate",children:[e.jsx(a.Label,{children:"Start Date"}),e.jsx(a.Control,{type:"date",name:"startDate",value:i.startDate,onChange:s,required:!0})]}),e.jsxs(a.Group,{controlId:"endDate",children:[e.jsx(a.Label,{children:"End Date"}),e.jsx(a.Control,{type:"date",name:"endDate",value:i.endDate,onChange:s,required:!0})]}),e.jsxs(a.Group,{controlId:"price",children:[e.jsx(a.Label,{children:"Price"}),e.jsx(a.Control,{type:"number",name:"price",value:i.price,onChange:s,required:!0})]}),e.jsx(a.Group,{controlId:"availability",children:e.jsx(a.Check,{type:"checkbox",name:"availability",checked:i.availability,onChange:s,label:"Available"})}),e.jsx(C,{className:"my-3",type:"submit",children:"Update Itinerary"})]})}),e.jsx(k,{})]})};export{F as default};
