import{r as g,e as C,j as e,C as m,B as d,Q as b,n as h}from"./index-DeE3vtCn.js";import{a as v}from"./api-BHjxf7no.js";import{F as t}from"./Form-BuK-_8iF.js";import"./ElementChildren-DI3yop4o.js";import"./Col-BDLpqSzm.js";const I=()=>{const[o,i]=g.useState({name:"",location:"",contact:"",amenities:[],rooms:[{roomType:"",rate:""}],agentRate:"",corporateRate:"",availability:!0}),p=C(),n=(l,r=null)=>{const{name:s,value:a}=l.target;if(s.startsWith("roomType")||s.startsWith("rate")){const c=[...o.rooms];c[r][s]=a,i({...o,rooms:c})}else if(s==="amenities"){const c=a.split(",").map(y=>y.trim());i({...o,[s]:c})}else i({...o,[s]:a})},u=()=>{i({...o,rooms:[...o.rooms,{roomType:"",rate:""}]})},x=l=>{const r=o.rooms.filter((s,a)=>a!==l);i({...o,rooms:r})},j=async l=>{l.preventDefault();const r={agentRate:o.agentRate,corporateRate:o.corporateRate},s={...o,contractRates:r};try{const a=await v(s);console.log(a),a.status===201&&(h.success("Hotel added successfully!",{position:"top-right",autoClose:2e3}),setTimeout(()=>{p("/hotels")},2e3))}catch(a){h.error(`Error adding hotel: ${a.response?a.response.data.message:a.message}`,{position:"top-right",autoClose:3e3}),console.error("Error adding hotel:",a.response?a.response.data:a.message)}};return e.jsxs(m,{children:[e.jsx(m.Header,{children:e.jsx(m.Title,{as:"h5",children:"Add New Hotel"})}),e.jsxs(m.Body,{children:[e.jsxs(t,{onSubmit:j,children:[e.jsxs(t.Group,{controlId:"hotelName",children:[e.jsx(t.Label,{children:"Hotel Name"}),e.jsx(t.Control,{type:"text",name:"name",value:o.name,onChange:n,required:!0})]}),e.jsxs(t.Group,{controlId:"hotelLocation",children:[e.jsx(t.Label,{children:"Location"}),e.jsx(t.Control,{type:"text",name:"location",value:o.location,onChange:n,required:!0})]}),e.jsxs(t.Group,{controlId:"hotelContact",children:[e.jsx(t.Label,{children:"Contact"}),e.jsx(t.Control,{type:"text",name:"contact",value:o.contact,onChange:n})]}),e.jsxs(t.Group,{controlId:"hotelAmenities",children:[e.jsx(t.Label,{children:"Amenities (comma-separated)"}),e.jsx(t.Control,{type:"text",name:"amenities",value:o.amenities.join(", "),onChange:n})]}),o.rooms.map((l,r)=>e.jsxs("div",{className:"mb-3",children:[e.jsxs(t.Group,{controlId:`roomType-${r}`,children:[e.jsx(t.Label,{children:"Room Type"}),e.jsx(t.Control,{type:"text",name:"roomType",value:l.roomType,onChange:s=>n(s,r),required:!0})]}),e.jsxs(t.Group,{controlId:`rate-${r}`,children:[e.jsx(t.Label,{children:"Rate"}),e.jsx(t.Control,{type:"number",name:"rate",value:l.rate,onChange:s=>n(s,r),required:!0})]}),r>0&&e.jsx(d,{className:"d-inline-flex my-3",variant:"danger",onClick:()=>x(r),children:"Remove Room"})]},r)),e.jsx(d,{variant:"secondary",onClick:u,children:"Add Another Room"}),e.jsxs(t.Group,{controlId:"agentRate",className:"mt-3",children:[e.jsx(t.Label,{children:"Agent Rate"}),e.jsx(t.Control,{type:"number",name:"agentRate",value:o.agentRate,onChange:n,required:!0})]}),e.jsxs(t.Group,{controlId:"corporateRate",children:[e.jsx(t.Label,{children:"Corporate Rate"}),e.jsx(t.Control,{type:"number",name:"corporateRate",value:o.corporateRate,onChange:n,required:!0})]}),e.jsxs(t.Group,{controlId:"hotelAvailability",children:[e.jsx(t.Label,{children:"Availability"}),e.jsx(t.Check,{type:"checkbox",name:"availability",label:"Available",checked:o.availability,onChange:()=>i({...o,availability:!o.availability})})]}),e.jsx(d,{variant:"primary",type:"submit",className:"mt-3",children:"Submit"})]}),e.jsx(b,{})]})]})};export{I as default};
