import{r as i,j as e,C as a,L as p,B as n,Q as g,n as r}from"./index-DeE3vtCn.js";import{o as y,p as b}from"./api-BHjxf7no.js";import{T as v}from"./Table-DF0PIz40.js";const I=()=>{const[l,d]=i.useState([]),[u,o]=i.useState(!0),[c,h]=i.useState(null);i.useEffect(()=>{(async()=>{try{const s=await y();console.log(s),d(s),o(!1)}catch{h("Failed to load itineraries."),o(!1)}})()},[]);const m=t=>{r.info(e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"Are you sure you want to delete this itinerary?"}),e.jsxs("div",{children:[e.jsx(n,{variant:"danger",size:"sm",onClick:()=>f(t),children:"Yes"}),e.jsx(n,{variant:"secondary",size:"sm",style:{marginLeft:"10px"},onClick:()=>r.dismiss(),children:"No"})]})]}),{position:"top-center",autoClose:!1,closeOnClick:!1,hideProgressBar:!0})},f=async t=>{try{await b(t),d(l.filter(s=>s._id!==t)),r.success("Itinerary deleted successfully!",{position:"top-right",autoClose:2e3}),r.dismiss()}catch{h("Failed to delete itinerary."),r.error("Failed to delete itinerary. Please try again.",{position:"top-right",autoClose:3e3}),r.dismiss()}};return u?e.jsx("p",{children:"Loading itineraries..."}):c?e.jsx("p",{children:c}):e.jsxs(a,{children:[e.jsxs(a.Header,{children:[e.jsx(a.Title,{as:"h5",children:"Itineraries"}),e.jsx(p,{to:"/itineraries/add",className:"btn btn-primary",children:"Add Itinerary"})]}),e.jsx(a.Body,{children:e.jsxs(v,{striped:!0,bordered:!0,hover:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Package"}),e.jsx("th",{children:"Hotel"}),e.jsx("th",{children:"Transport"}),e.jsx("th",{children:"Start Date"}),e.jsx("th",{children:"End Date"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Availability"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:l.map(t=>{var s,x,j;return e.jsxs("tr",{children:[e.jsx("td",{children:((s=t.package)==null?void 0:s.name)||"N/A"}),e.jsx("td",{children:((x=t.hotel)==null?void 0:x.name)||"N/A"}),e.jsx("td",{children:((j=t.transport)==null?void 0:j.vehicleType)||"N/A"}),e.jsx("td",{children:new Date(t.startDate).toLocaleDateString()}),e.jsx("td",{children:new Date(t.endDate).toLocaleDateString()}),e.jsx("td",{children:t.price}),e.jsx("td",{children:t.availability?"Available":"Not Available"}),e.jsxs("td",{children:[e.jsx(p,{to:`/itineraries/edit/${t._id}`,className:"btn btn-primary btn-sm",children:"Edit"})," ",e.jsx(n,{variant:"danger",size:"sm",onClick:()=>m(t._id),children:"Delete"})]})]},t._id)})})]})}),e.jsx(g,{})]})};export{I as default};
