import{o as g,e as D,r as u,j as e,C as l,B as C,Q as v,n as d}from"./index-DeE3vtCn.js";import{m as b,n as k}from"./api-BHjxf7no.js";import{F as t}from"./Form-BuK-_8iF.js";import"./ElementChildren-DI3yop4o.js";import"./Col-BDLpqSzm.js";const T=()=>{const{id:c}=g(),x=D(),[a,s]=u.useState({name:"",description:"",tags:"",destinations:"",tripType:"Domestic",isOneWay:!1,departureAirport:"",returnAirport:"",domesticDetails:{cities:"",transport:"",accommodations:"",localAttractions:""},internationalDetails:{visaRequired:!1,currency:"",airportTransfer:!1,layovers:""},weekendDetails:{activities:"",duration:"",nearbyAttractions:""},agentRate:0,clientRate:0,availability:!0});u.useEffect(()=>{(async()=>{try{const r=await b(c),i={...r,tags:Array.isArray(r.tags)?r.tags.join(", "):r.tags,destinations:Array.isArray(r.destinations)?r.destinations.join(", "):r.destinations};s(i)}catch{d.error("Failed to load package data.")}})()},[c]);const n=o=>{const{name:r,value:i,type:m,checked:j}=o.target;if(m==="checkbox")s({...a,[r]:j});else if(r.includes("domesticDetails")||r.includes("internationalDetails")||r.includes("weekendDetails")){const[p,y]=r.split(".");s({...a,[p]:{...a[p],[y]:i}})}else s({...a,[r]:i})},h=async o=>{o.preventDefault();const r={...a,tags:a.tags.split(",").map(i=>i.trim()),destinations:a.destinations.split(",").map(i=>i.trim())};try{await k(c,r),d.success("Package updated successfully!"),setTimeout(()=>{x("/packages")},2e3)}catch{d.error("Failed to update package.")}};return e.jsxs(l,{children:[e.jsx(l.Header,{children:e.jsx(l.Title,{as:"h5",children:"Edit Package"})}),e.jsx(l.Body,{children:e.jsxs(t,{onSubmit:h,children:[e.jsxs(t.Group,{controlId:"name",children:[e.jsx(t.Label,{children:"Package Name"}),e.jsx(t.Control,{type:"text",name:"name",value:a.name,onChange:n,required:!0})]}),e.jsxs(t.Group,{controlId:"description",children:[e.jsx(t.Label,{children:"Description"}),e.jsx(t.Control,{as:"textarea",name:"description",value:a.description,onChange:n,required:!0})]}),e.jsxs(t.Group,{controlId:"tags",children:[e.jsx(t.Label,{children:"Tags (comma separated)"}),e.jsx(t.Control,{type:"text",name:"tags",value:a.tags,onChange:n,required:!0})]}),e.jsxs(t.Group,{controlId:"destinations",children:[e.jsx(t.Label,{children:"Destinations (comma separated)"}),e.jsx(t.Control,{type:"text",name:"destinations",value:a.destinations,onChange:n,required:!0})]}),e.jsxs(t.Group,{controlId:"tripType",children:[e.jsx(t.Label,{children:"Trip Type"}),e.jsxs(t.Select,{name:"tripType",value:a.tripType,onChange:n,required:!0,children:[e.jsx("option",{value:"Domestic",children:"Domestic"}),e.jsx("option",{value:"International",children:"International"}),e.jsx("option",{value:"Weekend",children:"Weekend"})]})]}),a.tripType==="Domestic"&&e.jsxs(e.Fragment,{children:[e.jsxs(t.Group,{controlId:"domesticDetails.cities",children:[e.jsx(t.Label,{children:"Cities"}),e.jsx(t.Control,{type:"text",name:"domesticDetails.cities",value:a.domesticDetails.cities,onChange:n})]}),e.jsxs(t.Group,{controlId:"domesticDetails.transport",children:[e.jsx(t.Label,{children:"Transport"}),e.jsx(t.Control,{type:"text",name:"domesticDetails.transport",value:a.domesticDetails.transport,onChange:n})]}),e.jsxs(t.Group,{controlId:"domesticDetails.accommodations",children:[e.jsx(t.Label,{children:"Accommodations"}),e.jsx(t.Control,{type:"text",name:"domesticDetails.accommodations",value:a.domesticDetails.accommodations,onChange:n})]}),e.jsxs(t.Group,{controlId:"domesticDetails.localAttractions",children:[e.jsx(t.Label,{children:"Local Attractions"}),e.jsx(t.Control,{type:"text",name:"domesticDetails.localAttractions",value:a.domesticDetails.localAttractions,onChange:n})]})]}),a.tripType==="International"&&e.jsxs(e.Fragment,{children:[e.jsx(t.Group,{controlId:"internationalDetails.visaRequired",children:e.jsx(t.Check,{type:"checkbox",name:"internationalDetails.visaRequired",checked:a.internationalDetails.visaRequired,onChange:n,label:"Visa Required"})}),e.jsxs(t.Group,{controlId:"internationalDetails.currency",children:[e.jsx(t.Label,{children:"Currency"}),e.jsx(t.Control,{type:"text",name:"internationalDetails.currency",value:a.internationalDetails.currency,onChange:n})]}),e.jsx(t.Group,{controlId:"internationalDetails.airportTransfer",children:e.jsx(t.Check,{type:"checkbox",name:"internationalDetails.airportTransfer",checked:a.internationalDetails.airportTransfer,onChange:n,label:"Airport Transfer Included"})}),e.jsxs(t.Group,{controlId:"internationalDetails.layovers",children:[e.jsx(t.Label,{children:"Layovers"}),e.jsx(t.Control,{type:"text",name:"internationalDetails.layovers",value:a.internationalDetails.layovers,onChange:n})]})]}),a.tripType==="Weekend"&&e.jsxs(e.Fragment,{children:[e.jsxs(t.Group,{controlId:"weekendDetails.activities",children:[e.jsx(t.Label,{children:"Activities"}),e.jsx(t.Control,{type:"text",name:"weekendDetails.activities",value:a.weekendDetails.activities,onChange:n})]}),e.jsxs(t.Group,{controlId:"weekendDetails.duration",children:[e.jsx(t.Label,{children:"Duration"}),e.jsx(t.Control,{type:"text",name:"weekendDetails.duration",value:a.weekendDetails.duration,onChange:n})]}),e.jsxs(t.Group,{controlId:"weekendDetails.nearbyAttractions",children:[e.jsx(t.Label,{children:"Nearby Attractions"}),e.jsx(t.Control,{type:"text",name:"weekendDetails.nearbyAttractions",value:a.weekendDetails.nearbyAttractions,onChange:n})]})]}),e.jsx(t.Group,{controlId:"isOneWay",children:e.jsx(t.Check,{type:"checkbox",name:"isOneWay",checked:a.isOneWay,onChange:n,label:"One Way Trip"})}),e.jsxs(t.Group,{controlId:"departureAirport",children:[e.jsx(t.Label,{children:"Departure Airport"}),e.jsx(t.Control,{type:"text",name:"departureAirport",value:a.departureAirport,onChange:n,required:!0})]}),e.jsxs(t.Group,{controlId:"returnAirport",children:[e.jsx(t.Label,{children:"Return Airport"}),e.jsx(t.Control,{type:"text",name:"returnAirport",value:a.returnAirport,onChange:n,required:!0})]}),e.jsxs(t.Group,{controlId:"agentRate",children:[e.jsx(t.Label,{children:"Agent Rate"}),e.jsx(t.Control,{type:"number",name:"agentRate",value:a.agentRate,onChange:n,required:!0})]}),e.jsxs(t.Group,{controlId:"clientRate",children:[e.jsx(t.Label,{children:"Client Rate"}),e.jsx(t.Control,{type:"number",name:"clientRate",value:a.clientRate,onChange:n,required:!0})]}),e.jsx(t.Group,{controlId:"availability",children:e.jsx(t.Check,{type:"checkbox",name:"availability",checked:a.availability,onChange:n,label:"Available"})}),e.jsx(C,{className:"d-inline-flex my-3",variant:"primary",type:"submit",children:"Update Package"})]})}),e.jsx(v,{})]})};export{T as default};
