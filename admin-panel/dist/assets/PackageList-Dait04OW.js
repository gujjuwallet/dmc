import{r,j as e,C as n,L as x,B as i,Q as p,n as t}from"./index-DeE3vtCn.js";import{j as f,k as m}from"./api-BHjxf7no.js";import{T as k}from"./Table-DF0PIz40.js";const C=()=>{const[c,d]=r.useState([]),[j,l]=r.useState(!0),[o,h]=r.useState(null);r.useEffect(()=>{(async()=>{try{const a=await f();d(a),console.log(a),l(!1)}catch{h("Failed to fetch packages"),l(!1)}})()},[]);const g=s=>{t.info(e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"Are you sure you want to delete this package?"}),e.jsxs("div",{children:[e.jsx(i,{variant:"danger",size:"sm",onClick:()=>u(s),children:"Yes"}),e.jsx(i,{variant:"secondary",size:"sm",style:{marginLeft:"10px"},onClick:()=>t.dismiss(),children:"No"})]})]}),{position:"top-center",autoClose:!1,closeOnClick:!1,hideProgressBar:!0})},u=async s=>{try{await m(s),d(c.filter(a=>a._id!==s)),t.success("Package deleted successfully!",{position:"top-right",autoClose:2e3}),t.dismiss()}catch{h("Failed to delete package"),t.error("Failed to delete package. Please try again.",{position:"top-right",autoClose:3e3}),t.dismiss()}};return j?e.jsx("p",{children:"Loading packages..."}):o?e.jsx("p",{children:o}):e.jsxs(n,{children:[e.jsxs(n.Header,{children:[e.jsx(n.Title,{as:"h5",children:"Package List"}),e.jsx(x,{to:"/packages/add",children:e.jsx(i,{variant:"primary",children:"Add Package"})})]}),e.jsx(n.Body,{children:e.jsxs(k,{responsive:!0,hover:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Package Name"}),e.jsx("th",{children:"Destination"}),e.jsx("th",{children:"Trip Type"}),e.jsx("th",{children:"Rate"}),e.jsx("th",{children:"Availability"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:c.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.name}),e.jsx("td",{children:s.destinations}),e.jsx("td",{children:s.tripType}),e.jsx("td",{children:s.agentRate}),e.jsx("td",{children:e.jsx("h6",{children:s.availability?"Available":"Not Available"})}),e.jsxs("td",{children:[e.jsx(x,{to:`/packages/edit/${s._id}`,children:e.jsx(i,{variant:"warning",children:"Edit"})})," ",e.jsx(i,{variant:"danger",onClick:()=>g(s._id),children:"Delete"})]})]},s._id))})]})}),e.jsx(p,{})]})};export{C as default};
